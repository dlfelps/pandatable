var _=(function(d){"use strict";var h=(e=>(e.DETECT_TABLES="DETECT_TABLES",e.EXTRACT_TABLE="EXTRACT_TABLE",e.RUN_PYTHON="RUN_PYTHON",e))(h||{});function g(e){const t=window.getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&e.offsetWidth>0&&e.offsetHeight>0&&!e.hidden}function f(e){let t=Array.from(e.querySelectorAll("table"));t=t.filter(g);const r=Array.from(e.querySelectorAll("iframe"));for(const n of r)try{const o=n.contentDocument;o&&(t=t.concat(f(o)))}catch{}return t}function c(){return f(document).map((t,r)=>{const n=t.querySelectorAll("th").length>0;return{id:t.id||`table-${r}`,hasHeader:n,element:t}})}function m(e){const t=Array.from(e.rows);if(t.length===0)return[];const r=[];let n=0;const o=t[0],s=Array.from(o.cells);if(s.some(a=>a.tagName.toLowerCase()==="th"))s.forEach((a,i)=>{r.push(a.textContent?.trim()||i.toString())}),n=1;else{const a=e.tHead;a&&a.rows.length>0?(Array.from(a.rows[0].cells).forEach((i,l)=>{r.push(i.textContent?.trim()||l.toString())}),n=1):(s.forEach((i,l)=>{r.push(l.toString())}),n=0)}const b=[];for(let a=n;a<t.length;a++){const i=t[a],l={};Array.from(i.cells).forEach((p,T)=>{const y=r[T]||T.toString();l[y]=p.textContent?.trim()||""}),Object.keys(l).length>0&&b.push(l)}return b}function u(){chrome.runtime.onMessage.addListener((e,t,r)=>{if(e.type===h.DETECT_TABLES){const n=c();r({tables:n.map(o=>({id:o.id,hasHeader:o.hasHeader,name:o.element.caption?.textContent?.trim()||o.id}))})}else if(e.type===h.EXTRACT_TABLE){const o=c().find(s=>s.id===e.tableId);o&&r({data:m(o.element)})}else if(e.type==="HIGHLIGHT_TABLE"){const o=c().find(s=>s.id===e.tableId);document.querySelectorAll(".pandas-scraper-highlight").forEach(s=>{s.style.outline="",s.style.boxShadow="",s.classList.remove("pandas-scraper-highlight")}),o&&(o.element.scrollIntoView({behavior:"smooth",block:"center"}),o.element.style.outline="5px solid #2196f3",o.element.style.outlineOffset="2px",o.element.style.boxShadow="0 0 20px rgba(33, 150, 243, 0.5)",o.element.classList.add("pandas-scraper-highlight"),setTimeout(()=>{o.element.style.outline="",o.element.style.boxShadow=""},3e3))}return!0})}return console.log("Pandas Table Scraper: Content script loaded"),u(),window.__PANDAS_SCRAPER__={detect:()=>{const e=c();return console.log(`Detected ${e.length} tables:`,e.map(t=>({id:t.id,hasHeader:t.hasHeader}))),e},extract:e=>{const r=c().find(n=>n.id===e);if(r){const n=m(r.element);return console.table(n),n}console.error(`Table with ID "${e}" not found.`)}},console.log(`%c Pandas Table Scraper Debug Mode 
%c To use the debug helper, switch the Console context from "top" to "Pandas Table Scraper".
Then run: __PANDAS_SCRAPER__.detect()`,"font-weight: bold; font-size: 14px;","color: gray;"),d.setupMessageListener=u,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),d})({});
