var _=(function(d){"use strict";var f=(e=>(e.DETECT_TABLES="DETECT_TABLES",e.EXTRACT_TABLE="EXTRACT_TABLE",e.RUN_PYTHON="RUN_PYTHON",e))(f||{});function A(e){const t=window.getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&e.offsetWidth>0&&e.offsetHeight>0&&!e.hidden}function h(e){let t=Array.from(e.querySelectorAll("table"));t=t.filter(A);const o=Array.from(e.querySelectorAll("iframe"));for(const n of o)try{const r=n.contentDocument;r&&(t=t.concat(h(r)))}catch{}return t}function i(){return h(document).map((t,o)=>{const n=t.querySelectorAll("th").length>0;return{id:t.id||`table-${o}`,hasHeader:n,element:t}})}function u(e){const t=Array.from(e.rows);if(t.length===0)return[];const o=[];let n=0;const r=t[0],s=Array.from(r.cells);if(s.some(a=>a.tagName.toLowerCase()==="th"))s.forEach((a,l)=>{o.push(a.textContent?.trim()||l.toString())}),n=1;else{const a=e.tHead;a&&a.rows.length>0?(Array.from(a.rows[0].cells).forEach((l,c)=>{o.push(l.textContent?.trim()||c.toString())}),n=1):(s.forEach((l,c)=>{o.push(c.toString())}),n=0)}const m=[];for(let a=n;a<t.length;a++){const l=t[a],c={};Array.from(l.cells).forEach((g,b)=>{const E=o[b]||b.toString();c[E]=g.textContent?.trim()||""}),Object.keys(c).length>0&&m.push(c)}return m}function T(){chrome.runtime.onMessage.addListener((e,t,o)=>{if(e.type===f.DETECT_TABLES){const n=i();o({tables:n.map(r=>({id:r.id,hasHeader:r.hasHeader,name:r.element.caption?.textContent?.trim()||r.id}))})}else if(e.type===f.EXTRACT_TABLE){const r=i().find(s=>s.id===e.tableId);if(r){const s=u(r.element);o({data:s})}else o({data:[]})}return!0})}return console.log("Pandas Table Scraper: Content script loaded"),T(),window.__PANDAS_SCRAPER__={detect:()=>{const e=i();return console.log(`Detected ${e.length} tables:`,e.map(t=>({id:t.id,hasHeader:t.hasHeader}))),e},extract:e=>{const o=i().find(n=>n.id===e);if(o){const n=u(o.element);return console.table(n),n}console.error(`Table with ID "${e}" not found.`)}},console.log(`%c Pandas Table Scraper Debug Mode 
%c To use the debug helper, switch the Console context from "top" to "Pandas Table Scraper".
Then run: __PANDAS_SCRAPER__.detect()`,"font-weight: bold; font-size: 14px;","color: gray;"),d.setupMessageListener=T,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),d})({});
